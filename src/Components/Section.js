import React, { Component } from 'react'
import News from './News'
import InfiniteScroll from 'react-infinite-scroll-component';
import Spinner from './Spinner';
export default class Section extends Component {

    // prevpage(){

    // }
  

    constructor(props){
        super(props);
        // console.log(props);
        this.state ={
            articles:[],
            loading:true,
            page:0,
            totalresult:0
        }
        document.title=this.props.category.charAt(0).toUpperCase() +this.props.category.slice(1) +" 24/7 NEWS";
    }
    updatenews =async ()=> {
    //  await this.setState({page:this.state.page+1},async ()=>{
    //     let url=`https://newsapi.org/v2/top-headlines?country=in&page=${this.state.page}&category=${this.props.category}&apiKey=d36a1b487b5c487e998ae9166a29aaee`;
    //   await fetch(url).then(async (res)=>{
    //     this.props.setprogress(30);
    //    await res.json().then((result)=>{
    //     this.props.setprogress(80);
    //       this.setState({articles:this.state.articles.concat(result.articles),loading:false,totalresult:result.totalResults})
    //       // console.log(this.state.page)
    //     })
    //   this.props.setprogress(100);
    //   });
    //   })
    
          this.setState({"loading":"false","status":"ok","totalResults":38,"articles":[{"source":{"id":null,"name":"NDTV News"},"author":"NDTV Sports Desk","title":"KKR vs RR Live Score, IPL 2023: Onus Lies On Venkatesh Iyer, Nitish Rana; 2-Down KKR Struggle Against RR - NDTV Sports","description":"KKR vs RR Live Score: IPL 2023 match between KKR vs RR, Kolkata Knight Riders vs Rajasthan Royals, Catch all the live updates here","url":"https://sports.ndtv.com/ipl-2023/kkr-vs-rr-live-score-ipl-2023-today-56th-match-kolkata-knight-riders-vs-rajasthan-royals-live-score-updates-4025223","urlToImage":"https://c.ndtvimg.com/2023-05/2sqi5qao_venkatesh-iyer-bcci_625x300_11_May_23.jpg?im=FaceCrop,algorithm=dnn,width=1200,height=675","publishedAt":"2023-05-11T14:28:07Z","content":"KKR vs RR, IPL 2023, Live Updates: Yuzvendra Chahal gets his first wicket of the night as Nitish Rana departs for 22. Venkatesh Iyer has now been joined by Andre Russell at the crease as three-down K… [+623 chars]"},{"source":{"id":null,"name":"Hindustan Times"},"author":"HT Sports Desk","title":"Watch: Dhoni's emotional gesture towards Kuldeep in priceless reunion - Hindustan Times","description":"MS Dhoni had an emotional reunion with Kuldeep Yadav after the CSK vs DC match on Wednesday. | Cricket","url":"https://www.hindustantimes.com/cricket/watch-dhonis-emotional-gesture-to-kuldeep-in-priceless-reunion-after-csk-vs-dc-match-wins-the-internet-101683799020595.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2023/05/11/1600x900/dhoni_kuldeep_1683803054521_1683803062496.jpg","publishedAt":"2023-05-11T14:14:18Z","content":"The Chennai Super Kings took another strong step towards securing a berth in the playoffs of 2023 Indian Premier League on Wednesday, as they defeated Delhi Capitals by 27 runs in Chennai. The CSK pr… [+1808 chars]"},{"source":{"id":null,"name":"Hindustan Times"},"author":"HT News Desk","title":"After Modi meet, Naveen Patnaik says no to joining 'third front' for 2024 poll - Hindustan Times","description":"Naveen Patnaik-PM Modi meeting: The Odisha chief minister said the prime minister and he discussed proposals for an international airport in Puri. | Latest News India","url":"https://www.hindustantimes.com/india-news/naveen-patnaik-third-front-biju-janata-dal-lok-sabha-election-no-possibility-odisha-cm-after-meeting-pm-modi-101683809927406.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2023/05/11/1600x900/Odisha-chief-minister-Naveen-Patnaik--PTI-Photo-_1680276617287_1683810007719.jpg","publishedAt":"2023-05-11T13:12:15Z","content":"Odisha chief minister Naveen Patnaik on Thursday appeared to quash talk of his Biju Janata Dal joining a 'third front' of opposition parties to challenge the Bharatiya Janata Party and prime minister… [+3427 chars]"},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"etimes.in","title":"Video of Kriti Sanon sitting on the floor at the trailer launch of 'Adipurush' goes viral; fans call her - Times of India","description":"Kriti Sanon wins hearts of her fans after she sits down on the floor at the theatre during the trailer launch of Adipurush.","url":"https://timesofindia.indiatimes.com/entertainment/hindi/bollywood/news/video-of-kriti-sanon-sitting-on-the-floor-at-the-trailer-launch-of-adipurush-goes-viral-fans-call-her-down-to-earth/articleshow/100118570.cms","urlToImage":"https://static.toiimg.com/thumb/msid-100118570,width-1070,height-580,imgsize-33662,resizemode-75,overlay-toi_sw,pt-32,y_pad-40/photo.jpg","publishedAt":"2023-05-11T12:58:24Z","content":"Kriti Sanon praises 'Adipurush' co-star Prabhas, says 'he's as simple as Prabhu Ram'The trailer of Kriti Sanon and Prabhas starrer 'Adipurush' was launched today. The actress showered praises on Prab… [+82 chars]"},{"source":{"id":null,"name":"Devdiscourse"},"author":"Devdiscourse News Desk","title":"Science News Roundup: Human genome reboot better reflects global population - Devdiscourse","description":"Read more about Science News Roundup: Human genome reboot better reflects global population on Devdiscourse","url":"https://www.devdiscourse.com/article/science-environment/2448311-science-news-roundup-human-genome-reboot-better-reflects-global-population","urlToImage":"https://www.devdiscourse.com/remote.axd?https://devdiscourse.blob.core.windows.net/devnews/03_11_2022_15_22_21_3448603.jpg?width=920&format=jpeg","publishedAt":"2023-05-11T12:55:53Z","content":"Following is a summary of current science news briefs.\r\nHuman genome reboot better reflects global population\r\nScientists on Wednesday unveiled a new accounting of the human genome that improves on i… [+468 chars]"},{"source":{"id":null,"name":"Deccan Herald"},"author":null,"title":"Ketonaire ACV Keto Gummies Reviews [SCAM WARNING 2023] Ketonaire Keto Gummies Beware Undefined | Is It Worth Buying - Deccan Herald","description":"What is Ketonaire ACV Keto Gummies? Ketonaire ACV Keto Gummies are a delicious and convenient way to get all the benefits of the ketogenic diet, without all the hard work. They are made with apple cider vinegar, which is known for its health benefits, as well…","url":"https://www.deccanherald.com/brandspot/pr-spot/ketonaire-acv-keto-gummies-reviews-scam-warning-2023-ketonaire-keto-gummies-beware-undefined-is-it-worth-buying-1217816.html","urlToImage":"https://www.deccanherald.com/sites/dh/files/Pict%20993-1217816-1683807811.jpg","publishedAt":"2023-05-11T12:23:31Z","content":"What is Ketonaire ACV Keto Gummies? \r\nKetonaire ACV Keto Gummies are a delicious and convenient way to get all the benefits of the ketogenic diet, without all the hard work. They are made with apple … [+9468 chars]"},{"source":{"id":null,"name":"News18"},"author":"Ritayan Basu","title":"AFC Asian Cup 2023 Draw Highlights: India in Group B With Syria, Uzbekistan and Australia - News18","description":"AFC Asian Cup Draw Highlights: The Indian men's football team led by Sunil Chhetri will face Syria, Uzbekistan and Australia in the delayed quadrenial continental tournament","url":"https://www.news18.com/football/afc-asian-cup-2023-draw-live-score-free-streaming-latest-updates-india-group-sunil-chhetri-livenews-7782973.html","urlToImage":"https://images.news18.com/ibnlive/uploads/2023/05/afc_asian_cup_draw-168379284316x9.png","publishedAt":"2023-05-11T12:21:24Z","content":"important, how well we use that time to prepare, rather than concentrate on who our opponents will be. I truly believe in our team and the work that they put in, and with the support of the huge Indi… [+1679 chars]"},{"source":{"id":null,"name":"YouTube"},"author":null,"title":"Google's AI Chatbot Bard is Now Available for Everyone - Firstpost","description":"Googles AI Chatbot Bard is Now Available for EveryoneGoogle has announced that its AI-powered chatbot will now be available in over 180 countries including ...","url":"https://www.youtube.com/watch?v=n8rvhT7zXD0","urlToImage":"https://i.ytimg.com/vi/n8rvhT7zXD0/maxres2.jpg?sqp=-oaymwEoCIAKENAF8quKqQMcGADwAQH4AbYIgAKAD4oCDAgAEAEYciBUKD4wDw==&rs=AOn4CLD-p4D7XqqMhzGiS_oEDRqmexIgLQ","publishedAt":"2023-05-11T12:20:00Z","content":null},{"source":{"id":null,"name":"The Indian Express"},"author":"The Indian Express","title":"Astronomers piece together millions of images to reveal vast array of star nurseries - The Indian Express","description":null,"url":"https://indianexpress.com/article/technology/science/eso-vista-stellar-star-nursery-images-8604193/","urlToImage":null,"publishedAt":"2023-05-11T12:00:53Z","content":null},{"source":{"id":null,"name":"News18"},"author":"Pragati Pal","title":"Shiv Sena LIVE Updates: Uddhav Asks Shinde to Resign on Moral Grounds After SC Verdict; CM Says Truth Has W - News18","description":"Shiv Sena News LIVE Updates: The top court noted that the Governor's decision for a floor test was wrong and Speaker was also wrong in appointing the whip of the Eknath Shinde group","url":"https://www.news18.com/india/shiv-sena-news-live-supreme-court-maharashtra-political-crisis-uddhav-shinde-mumbai-livenews-7779247.html","urlToImage":"https://images.news18.com/ibnlive/uploads/2023/05/shiv-sena-case-supreme-court-sc-verdict-uddhav-shinde-sena-vs-sena-168378977116x9.jpg","publishedAt":"2023-05-11T12:00:23Z","content":"crisis.Supreme Court also held that it cannot order the restoration of the Uddhav Thackeray-led MVA government as the then Chief Minister resigned without facing the floor test.\r\nHowever, the top cou… [+3515 chars]"},{"source":{"id":null,"name":"India.com"},"author":"IANS","title":"Taarak Mehta Actress Jennifer Mistry Aka Roshan Sodhi Accuses Asit Kumarr Modi, 2 Others Of Sexual Miscondu... - Zee News","description":"Actress Jennifer Mistry, who is popularly known as Roshan Sodhi in the show Taarak Mehta Ka Ooltah Chashmah, has accused its producer of sexual harassment. The actress has been a part of the show for 15 years and has now taken a decision to quit, according to…","url":"https://zeenews.india.com/television/taarak-mehta-ka-ooltah-chashmahs-actress-jennifer-mistry-aka-roshan-sodhi-accuses-asit-kumarr-modi-2-others-of-sexual-misconduct-2606158.html","urlToImage":"https://english.cdn.zeenews.com/sites/default/files/2023/05/11/1198192-tmkoc-actress.jpg","publishedAt":"2023-05-11T11:47:08Z","content":"Mumbai: Actress Jennifer Mistry, who is popularly known as Roshan Sodhi in the show 'Taarak Mehta Ka Ooltah Chashmah', has accused its producer of sexual harassment. The actress has been a part of th… [+1177 chars]"},{"source":{"id":null,"name":"India Today"},"author":"Kanu Sarda","title":"SC ruling in AAP vs L-G fight: What it means for Kejriwal govt and what's next for Centre - India Today","description":"A five-judge Constitution bench on Thursday held that the Delhi government would have all rights related to services and administration. This is a big victory for the Arvind Kejriwal-led Aam Aadmi Party government and a setback for the Centre. How does the ru…","url":"https://www.indiatoday.in/law/story/sc-ruling-aap-lg-fight-what-next-for-centre-arvind-kejriwal-bjp-2377767-2023-05-11","urlToImage":"https://akm-img-a-in.tosshub.com/indiatoday/images/story/202305/kejriwal-lg-sc-sixteen_nine.jpg?VersionId=Yuloc3TBgcoqtG35gqwZlrTvec9TaF4z","publishedAt":"2023-05-11T11:37:30Z","content":"By Kanu Sarda: The Supreme Court on Thursday ruled in favour of the Delhi government on the issue of who would control the officers in the national capital. A five-judge Constitution bench headed by … [+3395 chars]"},{"source":{"id":null,"name":"Rediff.com"},"author":"PTI","title":"Spam calls: Govt notice to WhatsApp, says onus of user safety with platforms - Rediff.com","description":"The digital platforms are responsible and accountable for ensuring the safety of 'digital nagriks', the minister said, adding that the government will respond to every instance of alleged misuse or alleged breach of users' privacy.","url":"https://www.rediff.com/news/report/spam-calls-govt-to-send-notice-to-whatsapp-says-onus-of-user-safety-with-digital-platforms/20230511.htm","urlToImage":"https://im.rediff.com/news/2023/may/11whatsapp.jpg","publishedAt":"2023-05-11T11:33:32Z","content":"The Information Technology ministry will send a notice to WhatsApp on the issue of spam calls from unknown international numbers, Minister of State for IT Rajeev Chandrasekhar on Thursday said, asser… [+3672 chars]"},{"source":{"id":null,"name":"YouTube"},"author":null,"title":"From Android 14 To Pixel Fold, Here Is What Google Has In Store For 2023 | BQ Prime - BQ Prime","description":"From #Android14 to Pixel Fold, here's what #Google has in store for 2023.Read more: https://bit.ly/3pzTZ2I---------------------------------------------------...","url":"https://www.youtube.com/watch?v=lKfeGdu-eCc","urlToImage":"https://i.ytimg.com/vi/lKfeGdu-eCc/maxresdefault.jpg","publishedAt":"2023-05-11T11:04:27Z","content":null},{"source":{"id":null,"name":"Livemint"},"author":"Livemint","title":"Asian Paints Q4: Firm declares dividend of ₹21.25, sets record date - Mint","description":"Asian Paints has fixed Friday, 9 June, 2023 as the record date.","url":"https://www.livemint.com/companies/news/asian-paints-q4-firm-declares-dividend-of-rs-21-25-sets-record-date-check-details-here-11683801077468.html","urlToImage":"https://www.livemint.com/lm-img/img/2023/05/11/600x338/Capture_1642754173284_1683802988471.JPG","publishedAt":"2023-05-11T11:04:11Z","content":"Asian Paints has declared a final dividend of 21.25 per equity share of face value of Re 1 on Thursday. Apart from this, the company also announced its Q4 results for FY23 and the overall yearly perf… [+1818 chars]"},{"source":{"id":null,"name":"NDTV News"},"author":null,"title":"\"Contempt Of Court\": Pakistan's Supreme Court On Imran Khan's Arrest - NDTV","description":"The bench during the hearing expressed anger at the way 70-year-old Khan was arrested from the premises of the Islamabad High Court where he had come from Lahore for a case.","url":"https://www.ndtv.com/world-news/contempt-of-court-pakistans-supreme-court-on-imran-khans-arrest-4025422","urlToImage":"https://c.ndtvimg.com/2023-05/u451h1e_imran-khan-arrest-pic-pti-1200_625x300_09_May_23.jpg","publishedAt":"2023-05-11T11:03:39Z","content":"\"They should have taken permission from the court,\" said the top judge\r\nIslamabad: Pakistan's Supreme Court on Thursday ordered the anti-corruption watchdog to produce former prime minister Imran Kha… [+1437 chars]"},{"source":{"id":"reuters","name":"Reuters"},"author":null,"title":"Pakistan top court orders Imran Khan to be presented at court - media - Reuters","description":"Pakistan's top court on Thursday ruled that the arrest of former Prime Minister Imran Khan was illegal, his lawyer said, two days after his detention on graft allegations ignited deadly protests and a tussle with the powerful military.","url":"https://www.reuters.com/world/asia-pacific/pakistan-arrests-ex-pm-khans-party-leaders-protests-continue-2023-05-11/","urlToImage":"https://www.reuters.com/resizer/eFh9aJIK-qialac2-RIGhbZVK6w=/1200x628/smart/filters:quality(80)/cloudfront-us-east-2.images.arcpublishing.com/reuters/SJPDMKNZJ5N4DAAX2RN2KZ5KKY.jpg","publishedAt":"2023-05-11T10:56:00Z","content":"ISLAMABAD, May 11 (Reuters) - Pakistan's top court on Thursday ruled that the arrest of former Prime Minister Imran Khan was illegal, his lawyer said, two days after his detention on graft allegation… [+2688 chars]"},{"source":{"id":null,"name":"Hindustan Times"},"author":"Reuters","title":"Vehicles in flames after explosion in Italy's Milan, one injured. Video - Hindustan Times","description":"Local police said a van had caught fire. No further details were immediately available. | World News","url":"https://www.hindustantimes.com/world-news/several-vehicles-in-flames-after-explosion-in-italys-milan-report-101683801095712.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2023/05/11/1600x900/ANI-20230505376-0_1683447767821_1683801633556.jpg","publishedAt":"2023-05-11T10:43:23Z","content":"A van transporting oxygen gas canisters exploded in a Milan street on Thursday, injuring one person and setting nearby cars and motorbikes ablaze, local officials said.\r\nSeveral vehicles are in flame… [+706 chars]"},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"TIMESOFINDIA.COM","title":"4 early signs of alcohol-related fatty liver disease which people often ignore - Times of India","description":"Do not dismiss the early warning signs of alcoholic fatty liver disease, which may be mistaken as signs of some other not-so-serious condition.","url":"https://timesofindia.indiatimes.com/life-style/health-fitness/health-news/4-early-signs-of-alcohol-related-fatty-liver-disease-which-people-often-ignore/photostory/100158875.cms","urlToImage":"https://static.toiimg.com/photo/100158894.cms","publishedAt":"2023-05-11T10:30:00Z","content":"Drinking a large amount of alcohol can lead to a build-up of fats in the liver. This is called alcoholic fatty liver disease. The liver has the ability to heal itself. However, if there is no relief … [+523 chars]"},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"TIMESOFINDIA.COM","title":"Shane Watson shares the main reason behind Delhi Capitals' failure in IPL 2023 - Times of India","description":"Cricket News: Delhi Capitals' continuous failure to lift themselves up from the rock bottom of the points since the start of this season is mainly because of failur","url":"https://timesofindia.indiatimes.com/sports/cricket/ipl/top-stories/shane-watson-shares-the-main-reason-behind-delhi-capitals-failure-in-ipl-2023/articleshow/100159155.cms","urlToImage":"https://static.toiimg.com/thumb/msid-100159227,width-1070,height-580,imgsize-52240,resizemode-75,overlay-toi_sw,pt-32,y_pad-40/photo.jpg","publishedAt":"2023-05-11T10:19:00Z","content":"CSK vs DC IPL 2023: Coach Ricky Ponting says dot balls hurt Delhi Capitals' run-chaseDelhi Capitals' slipped to their seventh defeat in 11 matches when they lost to Chennai Super Kings by 27 runs in … [+156 chars]"}],loading:false})
    }
    //  prevpage= async ()=>{
    //   await this.setState({loading:true,page:this.state.page-1})
    //    await this.updatenews();
    // }
    // nextpage= async ()=>{
    //   this.setState({loading:true,page:this.state.page+1},()=>{
    //     this.updatenews();
    //   })
    // }
    async componentDidMount(){
      await  this.updatenews();
      // console.log("after")
        
        // let data=await fetch(url)
        // let parsedData= await data.json();
        // // console.log(parsedData);
        // this.setState({articles: parsedData.articles})
        // console.log(this.state.articles)
    }
  render() {
    
    // console.log("before")
    let {articles,loading}=this.state;
    if(loading) return <div className="spinner-border" style={{width:"7rem",height:"7rem",marginLeft:"45%",marginTop:"20%"}} role="status">
{/* <span classNam="visually-hidden">Loading...</span> */}
</div>
    else {
    return (  
    <>
        <marquee class="disable" behavior="" direction="">Beacuse of restrictions of usage of api this data is showing from sample data.</marquee>
        <h1 className='text-center sec'>TRENDING {this.props.category.toUpperCase()} NEWS</h1>
        <InfiniteScroll style={{overflow:"hidden"}}
  dataLength={this.state.articles.length} //This is important field to render the next data
  next={this.updatenews}
  // hasMore={this.state.articles.length!==this.state.totalresult}
  loader={<Spinner />}
    >
      <div className='container'>
        <div className='row'>
           {/* {console.log(articles)}   */}
        {articles.map ((element,index)=>{
           
            return  <div className="my-2 col-md-3" key={index}>
                <News author={element.author} content={element.content} description={element.description} url={element.url} urltoimage={element.urlToImage} title={element.title} sname={element.source.name}  />
            </div>
           
        })} 
        </div>
        </div>
        </InfiniteScroll>
      </>
    )
      }
  }
}
